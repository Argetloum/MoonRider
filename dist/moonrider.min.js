!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t:e.atomic=t(e)}(this,function(e){"use strict";var t={},n=function(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]},o=function(t,o,r){var i={success:function(){},error:function(){}},s=e.XMLHttpRequest||ActiveXObject,c=new s("MSXML2.XMLHTTP.3.0");return c.open(t,o,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){4===c.readyState&&(200===c.status?i.success.apply(i,n(c)):i.error.apply(i,n(c)))},c.send(r),{success:function(e){return i.success=e,i},error:function(e){return i.error=e,i}}};return t.get=function(e){return o("GET",e)},t.put=function(e,t){return o("PUT",e,t)},t.post=function(e,t){return o("POST",e,t)},t["delete"]=function(e){return o("DELETE",e)},t});var Client,MoonRider,Performance,WebSite,delay,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};MoonRider=function(){function e(){this.client=new Client,this.webSite=new WebSite,this.performance=new Performance}return e.prototype.performance=null,e.prototype.webSite=null,e.prototype.client=null,e.prototype.setPerformance=function(){return this.performance=new Performance},e}(),Performance=function(){function e(){this.setLoadingTimes()}return e.prototype.domContentReadableTime=0,e.prototype.serverLoadingTime=0,e.prototype.totalLoadingTime=0,e.prototype.loadEventTime=0,e.prototype.setLoadingTimes=function(){var e;e=window.performance.timing,this.totalLoadingTime=e.loadEventEnd-e.navigationStart,this.domContentLoadTime=e.domContentLoadedEventEnd-e.responseEnd,this.serverLoadingTime=e.responseEnd-e.requestStart,this.loadEventTime=e.loadEventEnd-e.responseEnd},e}(),WebSite=function(){function e(){this.setHost()}return e.prototype.host=null,e.prototype.setHost=function(){var e,t;return t=window.location.host,"localhost"===t?(console.log(t),e=window.location.pathname.split("/"),console.log(e),this.host=e[1]?t+"/"+e[1]:t):this.host=t},e}(),Client=function(){function e(){this.isTouch=__indexOf.call(window,"ontouchstart")>=0}return e.prototype.isTouch=!1,e}(),window.onload=function(){return delay(0,function(){var e;window.performance&&performance.timing&&(e=new MoonRider,atomic.post("/server/stats",JSON.stringify(e)).success(function(){}).error(function(){return console.log("Error while loading server")}))})},delay=function(e,t){return setTimeout(t,e)};