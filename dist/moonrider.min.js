!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t:e.atomic=t(e)}(this,function(e){"use strict";var t={},n=function(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]},o=function(t,o,r){var i={success:function(){},error:function(){}},s=e.XMLHttpRequest||ActiveXObject,c=new s("MSXML2.XMLHTTP.3.0");return c.open(t,o,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){4===c.readyState&&(200===c.status?i.success.apply(i,n(c)):i.error.apply(i,n(c)))},c.send(r),{success:function(e){return i.success=e,i},error:function(e){return i.error=e,i}}};return t.get=function(e){return o("GET",e)},t.put=function(e,t){return o("PUT",e,t)},t.post=function(e,t){return o("POST",e,t)},t["delete"]=function(e){return o("DELETE",e)},t});var MoonRider,Performance,delay;MoonRider=function(){function e(){}return e.prototype.performance=null,e.prototype.setPerformance=function(){return this.performance=new Performance},e}(),Performance=function(){function e(){this.getLoadingTimes()}return e.prototype.timing=window.performance.timing,e.prototype.domContentReadableTime=0,e.prototype.serverLoadingTime=0,e.prototype.totalLoadingTime=0,e.prototype.loadEventTime=0,e.prototype.getLoadingTimes=function(){return this.totalLoadingTime=this.timing.loadEventEnd-this.timing.navigationStart,this.domContentLoadTime=this.timing.domContentLoadedEventEnd-this.timing.responseEnd,this.serverLoadingTime=this.timing.responseEnd-this.timing.requestStart,this.loadEventTime=this.timing.loadEventEnd-this.timing.responseEnd},e}(),window.onload=function(){return delay(0,function(){var e;window.performance&&performance.timing&&(e=new MoonRider,e.setPerformance(),atomic.post("/endpoint",JSON.stringify(e)).success(function(){}).error(function(){return console.log("Error while loading server")}))})},delay=function(e,t){return setTimeout(t,e)};